<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å•è¯æ¶ˆæ¶ˆä¹</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            text-align: center;
            color: #667eea;
            font-size: 36px;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            border-radius: 10px;
            color: white;
        }
        .game-title {
            font-size: 24px;
            font-weight: bold;
        }
        .game-stats {
            display: flex;
            gap: 30px;
        }
        .stat-item {
            text-align: center;
        }
        .stat-value {
            font-size: 24px;
            font-weight: bold;
        }
        .stat-label {
            font-size: 14px;
            opacity: 0.8;
        }
        .game-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
        }
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
        .btn-success {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
        }
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.2);
        }
        .game-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .word-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        .word-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
        }
        .word-card.active {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            transform: scale(1.05);
        }
        .word-card.correct {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
            animation: correctAnimation 1s ease-in-out;
        }
        .word-card.incorrect {
            background: linear-gradient(135deg, #f44336 0%, #e91e63 100%);
            color: white;
            animation: incorrectAnimation 1s ease-in-out;
        }
        @keyframes correctAnimation {
            0% { transform: scale(1); }
            50% { transform: scale(1.2) rotate(5deg); }
            100% { transform: scale(1); }
        }
        @keyframes incorrectAnimation {
            0% { transform: scale(1); }
            25% { transform: scale(1.1) rotate(-5deg); }
            50% { transform: scale(1.1) rotate(5deg); }
            75% { transform: scale(1.1) rotate(-5deg); }
            100% { transform: scale(1); }
        }
        .word {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .meaning {
            font-size: 16px;
            color: #666;
        }
        .word-card.active .meaning {
            color: rgba(255,255,255,0.9);
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 30px;
            border: 1px solid #888;
            width: 80%;
            max-width: 600px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }
        .modal-header h2 {
            margin: 0;
            color: #667eea;
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close:hover {
            color: black;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #666;
        }
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            box-sizing: border-box;
        }
        .form-group textarea {
            height: 200px;
            resize: vertical;
        }
        .form-row {
            display: flex;
            gap: 10px;
        }
        .form-row .form-group {
            flex: 1;
        }
        .error-list {
            margin: 30px 0;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
        }
        .error-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #f44336;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .error-word { font-weight: bold; color: #f44336; }
        .error-meaning { color: #666; margin-left: 10px; }
        .footer {
            margin-top: 50px;
            text-align: center;
            color: #666;
            font-size: 14px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        .audio-control {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-left: auto;
        }
        .volume-slider {
            width: 100px;
        }
        .page-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin: 30px 0;
        }
        .page-info {
            font-size: 18px;
            font-weight: bold;
            color: #667eea;
        }
        .hidden {
            display: none;
        }
        @media (max-width: 768px) {
            .game-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            .game-stats {
                justify-content: center;
            }
            .game-controls {
                flex-direction: column;
                align-items: center;
            }
            .game-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ® å•è¯æ¶ˆæ¶ˆä¹</h1>
        
        <div class="game-header">
            <div class="game-title" id="gameTitle">å§œå°ä»™çš„è‹±è¯­è¯¾å ‚</div>
            <div class="game-stats">
                <div class="stat-item">
                    <div class="stat-value" id="totalWords">0</div>
                    <div class="stat-label">æ€»å•è¯</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="correctAnswers">0</div>
                    <div class="stat-label">æ­£ç¡®</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="incorrectAnswers">0</div>
                    <div class="stat-label">é”™è¯¯</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="accuracy">0%</div>
                    <div class="stat-label">æ­£ç¡®ç‡</div>
                </div>
            </div>
            <div class="audio-control">
                <label for="volume">éŸ³é‡:</label>
                <input type="range" id="volume" class="volume-slider" min="0" max="100" value="50">
                <button class="btn btn-secondary" onclick="toggleAudio()">ğŸ”Š</button>
            </div>
        </div>
        
        <div class="game-controls">
            <button class="btn btn-primary" onclick="openSettingsModal()">âš™ï¸ è®¾ç½®</button>
            <button class="btn btn-secondary" onclick="startGame()">ğŸ® å¼€å§‹æ¸¸æˆ</button>
            <button class="btn btn-success" onclick="showErrorList()">ğŸ“‹ é”™é¢˜è®°å½•</button>
            <button class="btn" style="background: #999; color: white;" onclick="exportErrorWords()">ğŸ’¾ å¯¼å‡ºé”™é¢˜</button>
        </div>
        
        <div class="page-controls">
            <button class="btn" onclick="prevPage()">â† ä¸Šä¸€é¡µ</button>
            <div class="page-info" id="pageInfo">ç¬¬ 1 é¡µ / å…± 0 é¡µ</div>
            <button class="btn" onclick="nextPage()">ä¸‹ä¸€é¡µ â†’</button>
        </div>
        
        <div class="game-grid" id="gameGrid">
            <!-- å•è¯å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </div>
        
        <div id="errorListContainer" class="error-list hidden">
            <h3>ğŸ“‹ é”™é¢˜è®°å½•</h3>
            <div id="errorListContent">
                <!-- é”™é¢˜å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
        
        <div class="footer">
            <p>ğŸ“š å•è¯æ¶ˆæ¶ˆä¹ - è®©å­¦ä¹ æ›´æœ‰è¶£ï¼</p>
            <p>Â© 2026 å°å­¦ç”Ÿå­¦ä¹ å·¥å…· | æ”¯æŒæœ¬åœ°å­˜å‚¨ï¼Œç¦»çº¿å¯ç”¨</p>
        </div>
    </div>
    
    <!-- è®¾ç½®æ¨¡æ€æ¡† -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>âš™ï¸ æ¸¸æˆè®¾ç½®</h2>
                <span class="close" onclick="closeSettingsModal()">&times;</span>
            </div>
            <form id="settingsForm">
                <div class="form-group">
                    <label for="titleInput">æ ‡é¢˜</label>
                    <input type="text" id="titleInput" value="å§œå°ä»™çš„è‹±è¯­è¯¾å ‚">
                </div>
                
                <div class="form-group">
                    <label for="wordsPerPage">æ¯é¡µå•è¯æ•°</label>
                    <input type="number" id="wordsPerPage" value="10" min="1" max="50">
                </div>
                
                <div class="form-group">
                    <label for="wordList">å•è¯åˆ—è¡¨ (æ ¼å¼: å•è¯@é‡Šä¹‰ï¼Œæ¯è¡Œä¸€ä¸ª)</label>
                    <textarea id="wordList">apple@è‹¹æœ
banana@é¦™è•‰
orange@æ©™å­
cat@çŒ«
dog@ç‹—
bird@é¸Ÿ
fish@é±¼
pig@çŒª
cow@å¥¶ç‰›
sheep@ç»µç¾Š
tiger@è€è™
lion@ç‹®å­
elephant@å¤§è±¡
monkey@çŒ´å­
rabbit@å…”å­
book@ä¹¦
pen@é’¢ç¬”
pencil@é“…ç¬”
school@å­¦æ ¡
teacher@è€å¸ˆ
student@å­¦ç”Ÿ
friend@æœ‹å‹
family@å®¶åº­
father@çˆ¸çˆ¸
mother@å¦ˆå¦ˆ
brother@å…„å¼Ÿ
sister@å§å¦¹</textarea>
                </div>
                
                <div class="form-row">
                    <button type="button" class="btn btn-secondary" onclick="importFromExcel()">ğŸ“ é€‰æ‹©Excel</button>
                    <button type="button" class="btn btn-primary" onclick="saveSettings()">ğŸ’¾ ä¿å­˜</button>
                    <button type="button" class="btn" style="background: #999; color: white;" onclick="closeSettingsModal()">å–æ¶ˆ</button>
                </div>
            </form>
        </div>
    </div>
    
    <script>
        let wordList = [];
        let gameTitle = "å§œå°ä»™çš„è‹±è¯­è¯¾å ‚";
        let wordsPerPage = 10;
        let currentPage = 1;
        let totalPages = 0;
        let selectedCards = [];
        let correctAnswers = 0;
        let incorrectAnswers = 0;
        let errorWords = [];
        let audioEnabled = true;
        let volume = 0.5;
        
        // åˆå§‹åŒ–
        function init() {
            // ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ•°æ®
            loadFromLocalStorage();
            // æ›´æ–°æ¸¸æˆæ ‡é¢˜
            document.getElementById('gameTitle').textContent = gameTitle;
            // è®¡ç®—æ€»é¡µæ•°
            calculateTotalPages();
            // æ˜¾ç¤ºç¬¬ä¸€é¡µå•è¯
            showPage(currentPage);
            // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
            updateStats();
        }
        
        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ•°æ®
        function loadFromLocalStorage() {
            const savedData = localStorage.getItem('wordMatchingGame');
            if (savedData) {
                const data = JSON.parse(savedData);
                wordList = data.wordList || [];
                gameTitle = data.gameTitle || "å§œå°ä»™çš„è‹±è¯­è¯¾å ‚";
                wordsPerPage = data.wordsPerPage || 10;
                correctAnswers = data.correctAnswers || 0;
                incorrectAnswers = data.incorrectAnswers || 0;
                errorWords = data.errorWords || [];
                audioEnabled = data.audioEnabled !== false;
                volume = data.volume || 0.5;
                document.getElementById('volume').value = volume * 100;
                document.getElementById('titleInput').value = gameTitle;
                document.getElementById('wordsPerPage').value = wordsPerPage;
                document.getElementById('wordList').value = wordList.map(item => `${item.word}@${item.meaning}`).join('\n');
            } else {
                // åˆå§‹åŒ–é»˜è®¤å•è¯åˆ—è¡¨
                const defaultWords = document.getElementById('wordList').value;
                parseWordList(defaultWords);
            }
        }
        
        // ä¿å­˜æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨
        function saveToLocalStorage() {
            const data = {
                wordList,
                gameTitle,
                wordsPerPage,
                correctAnswers,
                incorrectAnswers,
                errorWords,
                audioEnabled,
                volume
            };
            localStorage.setItem('wordMatchingGame', JSON.stringify(data));
        }
        
        // è§£æå•è¯åˆ—è¡¨
        function parseWordList(text) {
            const lines = text.trim().split('\n');
            wordList = [];
            lines.forEach(line => {
                const parts = line.split('@');
                if (parts.length >= 2) {
                    const word = parts[0].trim();
                    const meaning = parts.slice(1).join('@').trim();
                    if (word && meaning) {
                        wordList.push({ word, meaning });
                    }
                }
            });
        }
        
        // è®¡ç®—æ€»é¡µæ•°
        function calculateTotalPages() {
            totalPages = Math.ceil(wordList.length / wordsPerPage);
            document.getElementById('totalWords').textContent = wordList.length;
            document.getElementById('pageInfo').textContent = `ç¬¬ ${currentPage} é¡µ / å…± ${totalPages} é¡µ`;
        }
        
        // æ˜¾ç¤ºæŒ‡å®šé¡µçš„å•è¯
        function showPage(page) {
            currentPage = page;
            const startIndex = (page - 1) * wordsPerPage;
            const endIndex = startIndex + wordsPerPage;
            const pageWords = wordList.slice(startIndex, endIndex);
            
            const gameGrid = document.getElementById('gameGrid');
            gameGrid.innerHTML = '';
            
            // ç”Ÿæˆå•è¯å’Œé‡Šä¹‰å¡ç‰‡
            const allCards = [];
            
            // ç”Ÿæˆå•è¯å¡ç‰‡
            pageWords.forEach((item, index) => {
                const wordCard = document.createElement('div');
                wordCard.className = 'word-card';
                wordCard.dataset.index = startIndex + index;
                wordCard.dataset.type = 'word';
                wordCard.dataset.word = item.word;
                wordCard.dataset.meaning = item.meaning;
                wordCard.innerHTML = `
                    <div class="word">${item.word}</div>
                `;
                wordCard.onclick = () => selectCard(wordCard);
                allCards.push(wordCard);
            });
            
            // ç”Ÿæˆé‡Šä¹‰å¡ç‰‡
            pageWords.forEach((item, index) => {
                const meaningCard = document.createElement('div');
                meaningCard.className = 'word-card';
                meaningCard.dataset.index = startIndex + index;
                meaningCard.dataset.type = 'meaning';
                meaningCard.dataset.word = item.word;
                meaningCard.dataset.meaning = item.meaning;
                meaningCard.innerHTML = `
                    <div class="meaning">${item.meaning}</div>
                `;
                meaningCard.onclick = () => selectCard(meaningCard);
                allCards.push(meaningCard);
            });
            
            // éšæœºæ‰“ä¹±å¡ç‰‡é¡ºåº
            allCards.sort(() => Math.random() - 0.5);
            
            // æ·»åŠ åˆ°æ¸¸æˆç½‘æ ¼
            allCards.forEach(card => {
                gameGrid.appendChild(card);
            });
            
            document.getElementById('pageInfo').textContent = `ç¬¬ ${currentPage} é¡µ / å…± ${totalPages} é¡µ`;
        }
        
        // é€‰æ‹©å¡ç‰‡
        function selectCard(card) {
            if (selectedCards.length >= 2) {
                // é‡ç½®ä¹‹å‰çš„é€‰æ‹©
                selectedCards.forEach(c => c.classList.remove('active'));
                selectedCards = [];
            }
            
            card.classList.add('active');
            selectedCards.push(card);
            
            // æ’­æ”¾å•è¯è¯»éŸ³
            if (audioEnabled && card.dataset.type === 'word') {
                const word = card.dataset.word;
                playWordAudio(word);
            }
            
            if (selectedCards.length === 2) {
                // æ£€æŸ¥æ˜¯å¦åŒ¹é…
                setTimeout(() => checkMatch(), 500);
            }
        }
        
        // æ£€æŸ¥åŒ¹é…
        function checkMatch() {
            const card1 = selectedCards[0];
            const card2 = selectedCards[1];
            
            // æ£€æŸ¥æ˜¯å¦æ˜¯ä¸åŒç±»å‹çš„å¡ç‰‡ï¼ˆä¸€ä¸ªæ˜¯å•è¯ï¼Œä¸€ä¸ªæ˜¯é‡Šä¹‰ï¼‰
            if (card1.dataset.type === card2.dataset.type) {
                // ç±»å‹ç›¸åŒï¼Œä¸åŒ¹é…
                card1.classList.add('incorrect');
                card2.classList.add('incorrect');
                incorrectAnswers++;
                playSound('incorrect');
            } else {
                // æ£€æŸ¥å•è¯å’Œé‡Šä¹‰æ˜¯å¦å¯¹åº”
                const isMatch = (card1.dataset.word === card2.dataset.word && card1.dataset.meaning === card2.dataset.meaning);
                
                if (isMatch) {
                    // åŒ¹é…æ­£ç¡®
                    card1.classList.add('correct');
                    card2.classList.add('correct');
                    correctAnswers++;
                    playSound('correct');
                    
                    // å»¶è¿Ÿåç§»é™¤åŒ¹é…çš„å¡ç‰‡
                    setTimeout(() => {
                        card1.style.display = 'none';
                        card2.style.display = 'none';
                    }, 1000);
                } else {
                    // åŒ¹é…é”™è¯¯
                    card1.classList.add('incorrect');
                    card2.classList.add('incorrect');
                    incorrectAnswers++;
                    
                    // æ·»åŠ åˆ°é”™é¢˜è®°å½•
                    const errorWord = {
                        word: card1.dataset.type === 'word' ? card1.dataset.word : card2.dataset.word,
                        meaning: card1.dataset.type === 'meaning' ? card1.dataset.meaning : card2.dataset.meaning
                    };
                    errorWords.push(errorWord);
                    
                    playSound('incorrect');
                }
            }
            
            // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
            updateStats();
            // ä¿å­˜æ•°æ®
            saveToLocalStorage();
            
            // é‡ç½®é€‰æ‹©
            setTimeout(() => {
                selectedCards.forEach(c => {
                    c.classList.remove('active', 'correct', 'incorrect');
                });
                selectedCards = [];
            }, 1500);
        }
        
        // æ’­æ”¾å•è¯è¯»éŸ³
        function playWordAudio(word) {
            // è¿™é‡Œä½¿ç”¨Web Speech APIå®ç°è¯­éŸ³åˆæˆ
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'en-US';
                utterance.volume = volume;
                speechSynthesis.speak(utterance);
            }
        }
        
        // æ’­æ”¾éŸ³æ•ˆ
        function playSound(type) {
            // è¿™é‡Œå¯ä»¥æ·»åŠ æ­£ç¡®å’Œé”™è¯¯çš„éŸ³æ•ˆ
            console.log(`Playing ${type} sound`);
        }
        
        // åˆ‡æ¢éŸ³é¢‘
        function toggleAudio() {
            audioEnabled = !audioEnabled;
            saveToLocalStorage();
            const btn = event.target;
            btn.textContent = audioEnabled ? 'ğŸ”Š' : 'ğŸ”‡';
        }
        
        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        function updateStats() {
            const total = correctAnswers + incorrectAnswers;
            const accuracy = total > 0 ? Math.round((correctAnswers / total) * 100) : 0;
            
            document.getElementById('correctAnswers').textContent = correctAnswers;
            document.getElementById('incorrectAnswers').textContent = incorrectAnswers;
            document.getElementById('accuracy').textContent = `${accuracy}%`;
        }
        
        // ä¸Šä¸€é¡µ
        function prevPage() {
            if (currentPage > 1) {
                showPage(currentPage - 1);
            }
        }
        
        // ä¸‹ä¸€é¡µ
        function nextPage() {
            if (currentPage < totalPages) {
                showPage(currentPage + 1);
            }
        }
        
        // å¼€å§‹æ¸¸æˆ
        function startGame() {
            // éšæœºæ‰“ä¹±å•è¯é¡ºåº
            wordList.sort(() => 0.5 - Math.random());
            // é‡ç½®ç»Ÿè®¡ä¿¡æ¯
            correctAnswers = 0;
            incorrectAnswers = 0;
            errorWords = [];
            // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
            updateStats();
            // ä¿å­˜æ•°æ®
            saveToLocalStorage();
            // æ˜¾ç¤ºç¬¬ä¸€é¡µ
            showPage(1);
            alert('æ¸¸æˆå¼€å§‹ï¼');
        }
        
        // æ˜¾ç¤ºé”™é¢˜è®°å½•
        function showErrorList() {
            const container = document.getElementById('errorListContainer');
            const content = document.getElementById('errorListContent');
            
            if (errorWords.length === 0) {
                content.innerHTML = '<p>æ­å–œï¼æ²¡æœ‰é”™é¢˜ï¼</p>';
            } else {
                content.innerHTML = '';
                errorWords.forEach(item => {
                    const errorItem = document.createElement('div');
                    errorItem.className = 'error-item';
                    errorItem.innerHTML = `<span class="error-word">${item.word}</span><span class="error-meaning">${item.meaning}</span>`;
                    content.appendChild(errorItem);
                });
            }
            
            container.classList.remove('hidden');
        }
        
        // å¯¼å‡ºé”™é¢˜
        function exportErrorWords() {
            if (errorWords.length === 0) {
                alert('æ²¡æœ‰é”™é¢˜å¯ä»¥å¯¼å‡ºï¼');
                return;
            }
            
            let content = `é”™é¢˜è®°å½• - ${gameTitle}\n`;
            content += `å¯¼å‡ºæ—¶é—´: ${new Date().toLocaleString()}\n`;
            content += `===================\n`;
            
            errorWords.forEach(item => {
                content += `${item.word} - ${item.meaning}\n`;
            });
            
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `error-words-${new Date().getTime()}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
        
        // æ‰“å¼€è®¾ç½®æ¨¡æ€æ¡†
        function openSettingsModal() {
            document.getElementById('settingsModal').style.display = 'block';
        }
        
        // å…³é—­è®¾ç½®æ¨¡æ€æ¡†
        function closeSettingsModal() {
            document.getElementById('settingsModal').style.display = 'none';
        }
        
        // ä¿å­˜è®¾ç½®
        function saveSettings() {
            gameTitle = document.getElementById('titleInput').value || "å§œå°ä»™çš„è‹±è¯­è¯¾å ‚";
            wordsPerPage = parseInt(document.getElementById('wordsPerPage').value) || 10;
            const wordListText = document.getElementById('wordList').value;
            
            // è§£æå•è¯åˆ—è¡¨
            parseWordList(wordListText);
            
            // æ›´æ–°æ¸¸æˆæ ‡é¢˜
            document.getElementById('gameTitle').textContent = gameTitle;
            
            // è®¡ç®—æ€»é¡µæ•°
            calculateTotalPages();
            
            // æ˜¾ç¤ºç¬¬ä¸€é¡µ
            showPage(1);
            
            // ä¿å­˜æ•°æ®
            saveToLocalStorage();
            
            // å…³é—­æ¨¡æ€æ¡†
            closeSettingsModal();
            
            alert('è®¾ç½®ä¿å­˜æˆåŠŸï¼');
        }
        
        // ä»Excelå¯¼å…¥
        function importFromExcel() {
            // è¿™é‡Œç®€åŒ–å¤„ç†ï¼Œå®é™…å¯ä»¥å®ç°Excelæ–‡ä»¶ä¸Šä¼ å’Œè§£æ
            alert('Excelå¯¼å…¥åŠŸèƒ½å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼');
        }
        
        // éŸ³é‡å˜åŒ–
        document.getElementById('volume').addEventListener('input', function() {
            volume = parseInt(this.value) / 100;
            saveToLocalStorage();
        });
        
        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        window.onclick = function(event) {
            const modal = document.getElementById('settingsModal');
            if (event.target === modal) {
                closeSettingsModal();
            }
        }
        
        // åˆå§‹åŒ–æ¸¸æˆ
        init();
    </script>
</body>
</html>