<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>人生30000天可视化</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#10B981',
                        warning: '#F59E0B',
                        danger: '#EF4444',
                        dark: '#1E293B',
                        light: '#F8FAFC'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.8s ease-in-out',
                        'slide-up': 'slideUp 0.6s ease-out',
                        'pulse-slow': 'pulse 3s infinite'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' }
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' }
                        }
                    }
                },
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .card-glass {
                backdrop-filter: blur(12px);
                background: rgba(255, 255, 255, 0.7);
                border: 1px solid rgba(255, 255, 255, 0.2);
            }
            .bg-gradient-blue {
                background: linear-gradient(135deg, #EFF6FF 0%, #DBEAFE 50%, #EFF6FF 100%);
            }
            .shadow-soft {
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
            }
            .day-grid {
                  display: grid;
                  gap: 0.5px;
                  width: 100%;
                  overflow: hidden;
              }
              .day-cell {
                  width: 2px;
                  height: 2px;
                  border-radius: 50%;
                  min-width: 2px;
                  min-height: 2px;
                  transition: all 0.2s ease;
              }
              .day-cell:hover {
                  transform: scale(3);
                  z-index: 10;
              }
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-blue font-sans text-dark">
    <div class="container mx-auto px-4 py-8 max-w-5xl">
        <!-- 标题区域 -->
        <header class="text-center mb-12 animate-fade-in">
            <h1 class="text-[clamp(2rem,5vw,3rem)] font-bold text-primary mb-3">人生<span class="text-warning">30000</span>天可视化</h1>
            <p class="text-dark/70 text-lg max-w-2xl mx-auto">
                输入您的出生日期和预计寿命，直观了解您人生的时间分配与剩余旅程
            </p>
        </header>

        <!-- 输入表单 -->
        <div class="card-glass rounded-2xl p-6 shadow-soft mb-8 animate-slide-up">
            <form id="lifeForm" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label for="birthDate" class="block text-sm font-medium text-dark/80 mb-2">
                        <i class="fa fa-calendar text-primary mr-1"></i> 出生日期
                    </label>
                    <input 
                        type="date" 
                        id="birthDate" 
                        required 
                        class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all"
                    >
                </div>
                <div>
                    <label for="lifeExpectancy" class="block text-sm font-medium text-dark/80 mb-2">
                        <i class="fa fa-heartbeat text-primary mr-1"></i> 预计寿命 (岁)
                    </label>
                    <input 
                        type="number" 
                        id="lifeExpectancy" 
                        min="1" 
                        max="120" 
                        value="80" 
                        required 
                        class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all"
                    >
                </div>
                <div class="md:col-span-2">
                    <button 
                        type="submit" 
                        class="w-full bg-primary hover:bg-primary/90 text-white py-3 px-6 rounded-xl font-semibold transition-all duration-300 transform hover:scale-[1.02] hover:shadow-lg flex items-center justify-center gap-2"
                    >
                        <i class="fa fa-bar-chart"></i> 计算并生成人生时间轴
                    </button>
                </div>
            </form>
        </div>

        <!-- 统计信息 -->
        <div id="statsContainer" class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 opacity-0 transition-opacity duration-500">
            <div class="card-glass rounded-2xl p-6 shadow-soft">
                <div class="text-center">
                    <p class="text-dark/70 text-sm mb-1">已度过</p>
                    <p id="daysLived" class="text-4xl font-bold text-primary">0</p>
                    <p class="text-dark/60 text-xs mt-1">天</p>
                </div>
            </div>
            <div class="card-glass rounded-2xl p-6 shadow-soft">
                <div class="text-center">
                    <p class="text-dark/70 text-sm mb-1">剩余时间</p>
                    <p id="daysRemaining" class="text-4xl font-bold text-secondary">0</p>
                    <p class="text-dark/60 text-xs mt-1">天</p>
                </div>
            </div>
            <div class="card-glass rounded-2xl p-6 shadow-soft">
                <div class="text-center">
                    <p class="text-dark/70 text-sm mb-1">已完成</p>
                    <p id="percentageLived" class="text-4xl font-bold text-warning">0</p>
                    <p class="text-dark/60 text-xs mt-1">%</p>
                </div>
            </div>
        </div>

        <!-- 进度条 -->
        <div id="progressBarContainer" class="card-glass rounded-2xl p-6 shadow-soft mb-8 opacity-0 transition-opacity duration-500">
            <div class="mb-2 flex justify-between">
                <span class="text-sm font-medium text-dark/70">人生进度</span>
                <span id="progressText" class="text-sm font-medium text-primary">0%</span>
            </div>
            <div class="w-full h-6 bg-gray-200 rounded-full overflow-hidden">
                <div id="progressBar" class="h-full bg-gradient-to-r from-primary to-secondary transition-all duration-1000" style="width: 0%"></div>
            </div>
        </div>

        <!-- 时间轴可视化 -->
        <div id="timelineContainer" class="card-glass rounded-2xl p-6 shadow-soft mb-8 opacity-0 transition-opacity duration-500">
            <h3 class="text-xl font-bold text-dark mb-6">人生时间轴</h3>
            <div class="rounded-xl p-4 overflow-hidden">
                <div id="timeline" class="day-grid">
                    <!-- 时间轴网格将通过JavaScript动态生成 -->
                </div>
            </div>
            <div class="flex justify-between mt-4 text-xs text-dark/60">
                <span>出生</span>
                <span>现在</span>
                <span>预计寿命终点</span>
            </div>
            <div class="flex justify-center mt-4 text-xs text-dark/60">
                <div class="flex items-center mr-4"><span class="w-3 h-3 inline-block bg-primary mr-1"></span>已过天数</div>
                <div class="flex items-center mr-4"><span class="w-3 h-3 inline-block bg-warning mr-1"></span>今天</div>
                <div class="flex items-center"><span class="w-3 h-3 inline-block bg-gray-200 mr-1"></span>剩余天数</div>
            </div>
        </div>

        <!-- 生命阶段 -->
        <div id="lifeStagesContainer" class="card-glass rounded-2xl p-6 shadow-soft mb-8 opacity-0 transition-opacity duration-500">
            <h3 class="text-xl font-bold text-dark mb-6">生命阶段概览</h3>
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4">
                <div class="rounded-xl p-4 bg-primary/5 border border-primary/10">
                    <h4 class="font-semibold text-primary mb-1">童年</h4>
                    <p class="text-sm text-dark/70" id="childhoodStatus">0-12岁</p>
                </div>
                <div class="rounded-xl p-4 bg-secondary/5 border border-secondary/10">
                    <h4 class="font-semibold text-secondary mb-1">青少年</h4>
                    <p class="text-sm text-dark/70" id="teenagerStatus">13-18岁</p>
                </div>
                <div class="rounded-xl p-4 bg-warning/5 border border-warning/10">
                    <h4 class="font-semibold text-warning mb-1">青年</h4>
                    <p class="text-sm text-dark/70" id="youthStatus">19-35岁</p>
                </div>
                <div class="rounded-xl p-4 bg-danger/5 border border-danger/10">
                    <h4 class="font-semibold text-danger mb-1">中年以后</h4>
                    <p class="text-sm text-dark/70" id="adulthoodStatus">36岁以上</p>
                </div>
            </div>
        </div>

        <!-- 励志名言 -->
        <div id="quoteContainer" class="card-glass rounded-2xl p-6 shadow-soft text-center italic text-dark/80 opacity-0 transition-opacity duration-500">
            <p id="motivationalQuote" class="text-lg"></p>
        </div>

        <!-- 页脚 -->
        <footer class="w-full text-center text-dark/60 py-4 mt-12">
            <p class="text-sm">珍惜每一天，让有限的生命绽放无限的光彩</p>
        </footer>
    </div>

    <script>
        // 励志名言数组
        const quotes = [
            "人生不是关于你活了多少天，而是关于你记住了多少天。",
            "每一天都是新的开始，把握当下，不留遗憾。",
            "生命的意义不在于长度，而在于宽度和深度。",
            "珍惜时间，因为时间是组成生命的材料。",
            "每一个不曾起舞的日子，都是对生命的辜负。",
            "生命短暂，我们应该用它来做有意义的事情。",
            "时间是最公平的资源，每个人都只有24小时。",
            "把握现在，就是创造未来。"
        ];

        // DOM 元素
        const lifeForm = document.getElementById('lifeForm');
        const birthDateInput = document.getElementById('birthDate');
        const lifeExpectancyInput = document.getElementById('lifeExpectancy');
        const daysLivedElement = document.getElementById('daysLived');
        const daysRemainingElement = document.getElementById('daysRemaining');
        const percentageLivedElement = document.getElementById('percentageLived');
        const progressBar = document.getElementById('progressBar');
        const progressText = document.getElementById('progressText');
        const timeline = document.getElementById('timeline');
        const statsContainer = document.getElementById('statsContainer');
        const progressBarContainer = document.getElementById('progressBarContainer');
        const timelineContainer = document.getElementById('timelineContainer');
        const lifeStagesContainer = document.getElementById('lifeStagesContainer');
        const quoteContainer = document.getElementById('quoteContainer');
        const motivationalQuote = document.getElementById('motivationalQuote');
        const childhoodStatus = document.getElementById('childhoodStatus');
        const teenagerStatus = document.getElementById('teenagerStatus');
        const youthStatus = document.getElementById('youthStatus');
        const adulthoodStatus = document.getElementById('adulthoodStatus');

        // 设置默认出生日期为当前日期往前推25年
        const defaultBirthDate = new Date();
        defaultBirthDate.setFullYear(defaultBirthDate.getFullYear() - 25);
        birthDateInput.valueAsDate = defaultBirthDate;

        // 表单提交事件
        lifeForm.addEventListener('submit', function(event) {
            event.preventDefault();
            calculateLifeStats();
        });

        // 计算人生统计数据
        function calculateLifeStats() {
            const birthDate = new Date(birthDateInput.value);
            const lifeExpectancy = parseInt(lifeExpectancyInput.value);
            const today = new Date();
            
            // 计算已过天数
            const daysLived = Math.floor((today - birthDate) / (1000 * 60 * 60 * 24));
            
            // 计算总天数和剩余天数
            const totalDays = Math.floor(lifeExpectancy * 365.25); // 考虑闰年
            const daysRemaining = Math.max(0, totalDays - daysLived);
            
            // 计算百分比
            const percentageLived = Math.min(100, Math.round((daysLived / totalDays) * 100));
            
            // 更新UI
            updateStats(daysLived, daysRemaining, percentageLived, totalDays);
            updateProgressBar(percentageLived);
            generateTimeline(daysLived, totalDays);
            updateLifeStages(daysLived);
            showMotivationalQuote();
            
            // 显示所有容器
            showAllContainers();
        }

        // 更新统计信息
        function updateStats(daysLived, daysRemaining, percentageLived) {
            daysLivedElement.textContent = formatNumber(daysLived);
            daysRemainingElement.textContent = formatNumber(daysRemaining);
            percentageLivedElement.textContent = percentageLived + '%';
            
            // 添加动画效果
            daysLivedElement.classList.add('animate-pulse-slow');
            daysRemainingElement.classList.add('animate-pulse-slow');
            percentageLivedElement.classList.add('animate-pulse-slow');
            
            setTimeout(() => {
                daysLivedElement.classList.remove('animate-pulse-slow');
                daysRemainingElement.classList.remove('animate-pulse-slow');
                percentageLivedElement.classList.remove('animate-pulse-slow');
            }, 1500);
        }

        // 更新进度条
        function updateProgressBar(percentage) {
            progressBar.style.width = percentage + '%';
            progressText.textContent = percentage + '%';
        }

        // 生成时间轴网格
        function generateTimeline(daysLived, totalDays) {
            timeline.innerHTML = '';
            
            // 确定网格的列数，根据屏幕宽度和总天数计算
            // 最大列数设为100，确保在大多数屏幕上不需要滚动
            const maxColumns = 100;
            // 计算实际列数和行数
            const columns = Math.min(maxColumns, Math.ceil(Math.sqrt(totalDays)));
            const rows = Math.ceil(totalDays / columns);
            
            // 设置网格布局
            timeline.style.gridTemplateColumns = `repeat(${columns}, 1fr)`;
            timeline.style.gridTemplateRows = `repeat(${rows}, 1fr)`;
            
            // 创建天数格子
            for (let i = 0; i < totalDays; i++) {
                const cell = document.createElement('div');
                const dayNumber = i + 1;
                
                // 设置格子样式
                let bgColor = 'bg-gray-200'; // 默认背景色（未来的天数）
                if (dayNumber <= daysLived) {
                    // 如果是已过的天数
                    if (dayNumber === daysLived) {
                        // 今天
                        bgColor = 'bg-warning';
                        cell.classList.add('ring-2', 'ring-yellow-500');
                    } else {
                        // 已过的其他天数
                        bgColor = 'bg-primary';
                    }
                }
                
                cell.className = `day-cell ${bgColor} rounded-sm transition-all duration-300`;
                
                // 添加提示信息
                cell.title = `第 ${formatNumber(dayNumber)} 天`;
                
                timeline.appendChild(cell);
            }
        }

        // 更新生命阶段信息
        function updateLifeStages(daysLived) {
            const age = daysLived / 365.25;
            
            // 更新各个阶段状态
            if (age <= 12) {
                childhoodStatus.textContent = `进行中 (${age.toFixed(1)}岁)`;
                childhoodStatus.className += ' font-medium text-primary';
            } else {
                const yearsPassed = 12;
                childhoodStatus.textContent = `已完成 (${yearsPassed}年)`;
                childhoodStatus.className += ' line-through';
            }
            
            if (age > 12 && age <= 18) {
                teenagerStatus.textContent = `进行中 (${age.toFixed(1)}岁)`;
                teenagerStatus.className += ' font-medium text-secondary';
            } else if (age > 18) {
                const yearsPassed = 6;
                teenagerStatus.textContent = `已完成 (${yearsPassed}年)`;
                teenagerStatus.className += ' line-through';
            }
            
            if (age > 18 && age <= 35) {
                youthStatus.textContent = `进行中 (${age.toFixed(1)}岁)`;
                youthStatus.className += ' font-medium text-warning';
            } else if (age > 35) {
                const yearsPassed = 17;
                youthStatus.textContent = `已完成 (${yearsPassed}年)`;
                youthStatus.className += ' line-through';
            }
            
            if (age > 35) {
                adulthoodStatus.textContent = `进行中 (${age.toFixed(1)}岁)`;
                adulthoodStatus.className += ' font-medium text-danger';
            }
        }

        // 显示励志名言
        function showMotivationalQuote() {
            const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
            motivationalQuote.textContent = `"${randomQuote}"`;
        }

        // 显示所有容器
        function showAllContainers() {
            statsContainer.style.opacity = '1';
            progressBarContainer.style.opacity = '1';
            timelineContainer.style.opacity = '1';
            lifeStagesContainer.style.opacity = '1';
            quoteContainer.style.opacity = '1';
        }

        // 格式化数字（添加千位分隔符）
        function formatNumber(num) {
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
        }
    </script>
</body>
</html>